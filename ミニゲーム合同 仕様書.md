# ミニゲーム合同 仕様書的な何か
ミニゲ合同の会議で決まったいろんな仕様とかをまとめたもの


## 目次
1. [ミニゲーム合同とは](#1-ミニゲーム合同この世の何よりゲームが好きとは)</br>
2. [ゲーム仕様](#2-ゲーム仕様)</br>
    2-1. [Minecraftバージョン](#2-1-minecraft-バージョン)</br>
    2-2. [ワールドの設定とゲームルール](#2-2-ワールドの設定とゲームルール)</br>
    2-3. [プレイヤーの行動制限](#2-3-プレイヤーの行動制限)</br>
    2-4. [マップのリリース](#2-4-マップのリリース)</br>
    2-5. [収録ミニゲーム概要](#2-5-収録ミニゲーム概要)</br>
    2-6. [引継ぎ機構](#2-6-引継ぎ機構)</br>
    
3. [ミニゲーム開発の規則](#3-ミニゲーム開発の規則)</br>
    [規則の早見表](#開発規則早見表)</br>
    3-1. [合同企画の趣旨に合わせるための規則](#3-1-合同企画の趣旨に合わせるための規則)</br>
    3-2. [ワールドをまとめやすくするための規則](#3-2-ワールドをまとめやすくするための規則)</br>
    3-3. [干渉しないようにするための規則](#3-3-干渉しないようにするための規則)</br>
4. [ベースの開発/共有機能の使い方](#4ベースの開発共有機能の使い方)</br>
    4-1. [ロビー](#4-1-ロビー)</br>
    4-2. [アシストデータパック](#4-2-アシストデータパック)</br>
    　・[開発](#アシストデータパックの開発)</br>
    　・[使い方](#アシストデータパックの開発)</br>
    4-3. [便利なデータパックライブラリの使い方](#4-3-便利なデータパックライブラリの使い方)</br>
5. [製作者/ミニゲーム一覧](#4製作者ミニゲーム一覧)</br>


## 1. ミニゲーム合同「この世の何よりゲームが好き！」とは
　ミニゲーム合同こと「この世の何よりゲームが好き！」とは、コマンド勢のみんなで集まって様々なミニゲームをつくり、それを一つのワールドに収録しよう、という合同開発企画です。nutbox氏の発作的な提案によって集められたコマンド勢たちが、個性豊かなミニゲームを作っています。</br>
　ゲームのスコアを競ったり、ゲームをするともらえるミニ(通貨)をためて様々なアイテムを買ったり、遊び方は様々です！</br>
　ミニゲームの製作はこの仕様書に示すルールの範囲内であればどのようなものでも大丈夫です。</br>

</br>[目次に戻る](#目次)

## 2. ゲーム仕様
### 2-1. Minecraft バージョン
ゲームの開発は**Minecraft ver 1.16.5**で行う。</br>
プレイ側の保障されるバージョンは未検証。</br>
Minecraftの最新バージョンがリリースされれば、マップのリリース時期と相談してバージョンアップの検討する。</br>

### 2-2. ワールドの設定とゲームルール
ゲームルールは```system_000:gamerule```ファンクションによって設定されます。
| 項目                       |  設定値   |
| :------------------------- | :-------: |
| ゲームモード               | adventure |
| 難易度                     |     ?     |
| announceAdvancements       |   false   |
| commandBlockOutput         |   false   |
| disableElytraMovementCheck |   true    |
| disableRaids               |   true    |
| doDaylightCycle            |   false   |
| doEntityDrops              |   false   |
| doFireTick                 |   false   |
| doInsomnia                 |   false   |
| doImmediateRespawn         |   true    |
| doLimitedCrafting          |   true    |
| doMobSpawning              |   false   |
| doPatrolSpawning           |   false   |
| doTileDrops                |   false   |
| doTraderSpawning           |   false   |
| doWeatherCycle             |   false   |
| fallDamage                 |   false   |
| keepInventory              |   true    |
| maxEntityCramming          |     0     |
| mobGriefing                |   false   |
| randomTickSpeed            |     0     |
| showDeathMessages          |   false   |
| spawnRadius                |     0     |
| spectatorsGenerateChunks   |   false   |

| 未設定項目            | 規定値  |
| :-------------------- | :-----: |
| doMobLoot             | (true)  |
| drowningDamage        | (true)  |
| fireDamage            | (true)  |
| logAdminCommands      | (false) |
| maxCommandChainLength | (65536) |
| naturalRegeneration   | (true)  |
| reducedDebugInfo      | (true)  |
| sendCommandFeedback   | (false) |

### 2-3. プレイヤーの行動制限
| 設定項目               | 設定値 |
| :--------------------- | :----: |
| 推奨プレイ人数         |   1~   |
| チート(コマンド)の仕様 | 非推奨 |

### 2-4. マップのリリース
ミニゲームは、一気に製作してまとめるのではなく、数本ずつ完成したものを付け足す形で配布する。</br>
現在 ver.1「この世の何よりゲームが好き！」の開発中。数本(未定)のミニゲームを収録して配布予定。</br>
次期 ver.2「この世の何よりゲームが好き！！」開発未定。ver.1のワールドに新たにゲームを加える予定。</br>

### 2-5. 収録ミニゲーム概要
オセロ、マインスイーパー、インベーダー等の既存のものから、玉突きゲームやタラを狩るアクションゲームのようなオリジナルゲームなど、様々な種類のものを開発予定。RPG等の長編になるものは「ミニゲーム」の範疇に収まらないので無し。</br>

### 2-6. 引継ぎ機構
新たなワールドをリリースする際に、前ワールドのデータを引き継ぐことができるような機構を用意する。
主な引継ぎ機構のシステムはメインシステム側での開発をするが、ミニゲーム別で引き継ぎたい要素の保存やロード等はミニゲーム側で用意する。</br>
設定の詳細は[アシストデータパックについて](#4-2-アシストデータパックについて)を参照。</br>

### 2-7. マルチ対応
マルチプレイ環境においてプレイヤー別の処理を円滑にするため、様々なシステムを用意する。
**○プレイヤーid、プレイヤー別ストレージ**</br>
ワールドに初めてログインしたときに個別のidが```id_000```スコアボードに設定される。同時に、(0,0,0)付近に同じ```id_000```を持ったプレイヤー別のデータストレージ用のアイテムエンティティ(プレイヤーのモブヘッド)が召喚される。</br>
**○参加中ゲームの情報**
現在プレイヤーが遊んでいるゲームのゲームidを```playing_000```スコアボードに記録する。```playing_000```はゲームに参加、退出するときなどに書き換える。ロビーにいるときは```playing_000 = 0```。

</br>[目次に戻る](#目次)

## 3. ミニゲーム開発の規則
共同開発をする上で様々なルールが決まっているので、ミニゲームを開発する人は**必ず**一読しておいてください。</br>
下記の早見表をチェックリストのように使用してくれれば楽だと思います。
### **開発規則早見表**
|                         規則                          | 規則                                                                                                                                  | 概要                                                                                             |
| :---------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------ | :----------------------------------------------------------------------------------------------- |
| [1](#規則-1-マインクラフトのバージョン-2021-217現在)  | MCバージョンは1.16.5                                                                                                                  | バージョンが上がったら配布時期を考えて更新を検討する                                             |
|               [2](#規則-2-ゲームの規模)               | ゲームの規模は大きくしすぎない                                                                                                        |                                                                                                  |
|                 [3](#規則-3-ミニ通貨)                 | ゲームの報酬にミニ(通貨)を実装する                                                                                                    | どうしても厳しそうなら無しでもよい                                                               |
|                                                       | ミニの利用は自由                                                                                                                      | ゲーム内アイテムの購入やコンテニュー機能に用いるなど                                             |
|                                                       | ミニの収入は平均 **100 ミニ/分** 程にする 支出は自由                                                                                  | そこまで厳密ではないが、なるべくインフレ等はしないように                                         |
|             [4](#規則-4-データ引継ぎ機構)             | データ引継ぎ機構については、assist_datapackに用意された機構を用いる                                                                   | ランキング情報や、プレイヤーのスコア等を保存し、新ワールドに引き継ぐ機能を持たせることができる。 |
|               [5](#規則-5-ステージ移動)               | ステージ移動用に```player_000:join_game```、playing_000の設定、tpを行うfunctionが必須                                                 | 詳細は[アシストデータパックについて](#4-2-アシストデータパックについて)を参照                    |
|               [6](#規則-6-ゲームの建築)               | 建築等はストラクチャーで保存する                                                                                                      | まとめる側で設置しやすいように、```F3+I```でロードストラクチャーブロックの情報等があると頼もしい |
| [7](#規則-7-ワールド退出コマンド仕様等の例外時の処理) | プレイヤーがゲームの最中等に退出し、再参加したときに```(未設定)```を実行する                                                          | まだ決まってない                                                                                 |
|       [8](#規則-8-プレイヤーのデータの保存方法)       | プレイヤー別に保存しておきたいデータは、ロビーに設置されたプレイヤー別のアイテムエンティティに保存                                    |                                                                                                  |
|         [9](#規則-9-ファンクションの記述規則)         | 未定義                                                                                                                                |                                                                                                  |
|                [10](#規則-10-製作者id)                | 製作者idはゲームを初めて製作するときに順番に付けられる。製作開始するときにDiscordで宣言すればよい。                                 |                                                                                                  |
|                [11](#規則-11-ゲームid)                | ゲームidは ```ゲームid=製作者id × 100 + ゲームが何作品目か```                                                                         | 例:製作者番号3 3作品目のゲームの場合 ```ゲームid = 303```,                                       |
|          [12](#規則-12-ミニゲームの設置座標)          | 製作に使用可能な座標は```x座標: <製作者id> × 1000 ± 500 , z座標: ±∞```または```x座標: (-1) × <製作者id> × 10000 ± 5000 , z座標: ±∞``` | 前者の範囲を主に使用し、範囲が足りないときは後者を使用する。                                     |
|             [13](#規則-13-データパック名)             | 「データパックの名前」は、ゲーム名の前にゲームidを付ける                                                                              | 例:```501_gun```,```102_pac_man```,```401_タラタラしてんじゃねーよ```                            |
|                                                       | 「名前空間」は名前の後ろにゲームidを付ける。                                                                                          | 例:```gun_501```,```bullet_501```,```pac_man_102```,```suiryu_taratara_401```                    |
|             [14](#規則-14-スコアボード名)             | ミニゲームに用いるスコアボードを命名する際は、末尾にゲームidを付ける。                                                                | 例:```timer_101```,```stage_1203```                                                              |
|             [15](#規則-15-リソースパック)             | ゲーム別のリソース(テクスチャ,モデル等)を追加する場合は```resources/assets/<ゲーム名>_<ゲームid>```に配置する。                       |                                                                                                  |
|    [16](#規則-16-そのほか数値や名前が被りうるもの)    | UUID を使用するときはUUID[1]にゲーム別idをいれる。                                                                                    |                                                                                                  |
|                                                       | CMDの値またはmap idには```<製作者番号> × 1000 + <任意の数字>```を使用する                                                             |                                                                                                  |
|           [17](#規則-17-playing_000の設定)            | ゲームをプレイしているプレイヤーには必ず```playing_000```スコアボードにゲームidを設定する。                                           |                                                                                                  |
|     [18](#規則-18-プレイヤーの持ち物に関する制限)     | 未定義                                                                                                                                |                                                                                                  |

</br>[目次に戻る](#目次)

### **3-1. 合同企画の趣旨に合わせるための規則**
企画の趣旨は守りたい。共通概念など。</br>
#### **規則 1 マインクラフトのバージョン** (2021 2/17現在)
開発は**Minecraft ver.1.16.5** で行う(2021 2/17現在)</br>
主に気を付ける必要がある変更点</br>
随時最新verに更新していきたい</br>

#### **規則 2 ゲームの規模**
RPGのような長いゲームはミニゲームの範疇に収まらないので基本的にはなし。</br>

#### **規則 3 ミニ(通貨)**
ワールドに通貨の概念があり、様々なミニゲーム等で使用されるので価値は統一する。</br>
さまざまな場面で利用されるものなので、**なるべくすべてのミニゲームの報酬で入手できるようにする**。</br>
**ゲーム内でどのように利用させるかは自由**。ショップ用の通貨としてや、コンテニュー機能に用いるなど。</br>
ただし、インフレ等は防ぎたいので、どの程度の入手率にするかは統一する。**平均して1分あたりに100ミニが入手できる**ように報酬を調節する。支出率は個々の感覚に任せる。入手率支出率について迷った場合はみんなで考えよう。

#### **規則 4 データ引継ぎ機構**
新たなワールドをリリースする際に、前ワールドのデータを引き継ぐことができるような機構を用意することになっているので、引継ぎたいデータ等がある場合は[アシストデータパックについて](#4-2-アシストデータパックについて)を参照してデータの保存/ロードを行うfunctionを用意する。

</br>[一覧表に戻る](#開発規則早見表)

### **3-2. ワールドをまとめやすくするための規則**
ここで開発したゲームをまとめるときに、製作者以外の人間でもスムーズにまとめることができるように。</br>
個々で作らなくてもいいように、全員である程度共有できるものとかは共有したい。</br>

#### **規則 5 ステージ移動**
入室(「ロビー」から「ミニゲーム」へプレイヤーを移動)と退室(「ミニゲーム」から「ロビー」へプレイヤーを移動)をさせるためのfunctionは、ミニゲーム開発側が用意すること。</br>
そのfunctionの内容は「座標移動」「playing_000スコアの設定」、「```player_000:join_game```の実行」は必須項目で、そのほかミニゲーム参加時に実行したいコマンド等を記入してください。</br>

#### **規則 6 ゲームの建築**
基本的にゲームは個別で作成し、配布前に建築含めて一つのワールドに移動させる。</br>
まとめるときに建築を簡単に一つのワールドに設置できるように、**建築をすべてストラクチャーブロックで保存する**。ロードしやすいように、```F3+I```等でストラクチャーブロックの情報と位置をメモしたものも欲しい。</br>
ゲームの建築の大きさは基本自由で、建築する場所は[規則12 ミニゲームの設置座標](#規則-12-ミニゲームの設置座標)を参照。</br>

#### **規則 7 ワールド退出/コマンド仕様等の例外時の処理**
未定義

#### **規則 8 プレイヤーのデータの保存方法**
ワールドの座標(0,0,0)付近に設置された、プレイヤー別のアイテムエンティティが存在する。</br>
アイテムエンティティの検索は```@e[x=0.5,y=1.0,z=0.5,distance=..0,tag=storage_000]```で可能。</br>
ゲーム別のデータを保存しておきたい場合は、アイテムエンティティの```Item.tag.<ゲーム番号>```に保存する。</br>

#### **規則 9 ファンクションの記述規則**
未定義

</br>[一覧表に戻る](#開発規則早見表)

### **3-3. 干渉しないようにするための規則**
　別々の製作者で作ったゲームが干渉しないようにするための規則。基本的には入退室処理と命名を気を付けていれば大丈夫なはず。</br>

#### **規則 10 製作者ID**
　**ゲームの製作を開始した順で付けられる**。ゲームの製作を開始するときにdiscordで宣言すればよい。規則に明記されていないものでも、製作者別で分けたいものがあった場合はユーザーネームか製作者idの仕様を推奨する。</br>

#### **規則 11 ゲームID**
　ゲーム別のデータパックやNBT、スコアボードやスコアボードタグ等を扱うときにこのidを用いる。</br>
**ゲームidは```<製作者id> × 100 + <ゲームが何作品目か>```で定義する。**</br>

例: ```製作者id = 3```の人が```3```作品目のゲームに付けるidは```303```となる。</br>

#### **規則 12 ミニゲームの設置座標**
　ミニゲームの建築の場所が被らないように、製作者毎に使用できる座標の範囲が限られている。範囲は主に2つに分かれており、建築の規模によって使い分ける。</br>
一つ目の範囲は 幅 1000m の範囲で```x座標: <製作者id> × 1000 ± 500 , z座標: ±∞```となる。主にこちらの範囲を使ってほしい。</br>
二つ目の範囲は、一つ目の範囲に建築が収まらない時のために用意されており、幅10000mの範囲で```x座標: (-1) × <製作者id> × 10000 ± 5000 , z座標: ±∞```となる。</br>

例:```製作者id = 3```の人が使用できる座標範囲は```x:2500~3500, z:±∞```と```x:-35000~-25000, z:±∞```</br>

#### **規則 13 データパック名**
　データパックは、「データパックの名前」と「名前空間」とで命名方法が異なる。</br>
「データパックの名前」は、名前による整列がしやすいように**ゲーム名の前にゲームidを付ける**。</br>
例:```501_gun```,```102_pac_man```,```401_タラタラしてんじゃねーよ```</br>

「名前空間」は、機能名による候補検索をしやすくしたいため、基本的に**ゲーム名の後ろにゲームidを付ける**。</br>
例:```gun_501```,```bullet_501```,```pac_man_102```,```suiryu_taratara_401```

#### **規則 14 スコアボード名**
　ミニゲームに用いるスコアボードを命名する際は、機能名による候補検索をしやすくしたいため**末尾にゲームidを付ける**。
例:```timer_101```,```stage_1203```</br>

#### **規則 15 リソースパック**
　モデルやテクスチャ、サウンド等を追加する場合は**```resources/assets/<ゲーム名>_<ゲームid>```に配置する**。</br>
```resources/assets/minecraft/```のデータを変更する際は、githubからミニゲ合同の最新のresourcesのデータをpullしてから変更する。</br>

#### **規則 16 そのほか数値や名前が被りうるもの**
**〇** UUID</br>
UUID[1]にゲーム別idをいれて使用する。そのほかの部分は自由。</br>

**〇** CMD/map id</br>
CMDの値またはmap idには```<製作者番号> × 1000 + <任意の数字>```を使用する</br>

#### **規則 17 playing_000の設定**
ゲームをプレイしているプレイヤーには必ず```playing_000```スコアボードにゲームidを設定し、ミニゲームのコマンドの操作対象は必ずそのゲームのゲームidを```playing_000```に持つプレイヤーのみに限定する。</br>
プレイヤーをミニゲームのエリアにテレポートするときは必ず```playing_000```を変更する。システムデータパックはロビーに来るプレイヤーのスコアしか変更しないので、必ずミニゲーム側で用意する。</br>
ロビーにいるプレイヤーは```playing_000 = 0```

#### **規則 18 プレイヤーの持ち物に関する制限**
ゲーム別アイテムなどは、ゲームから退室させるときにプレイヤー別ストレージ(アイテムエンティティ)に保存する？
未設定

</br>[一覧表に戻る](#開発規則早見表)
</br>[目次に戻る](#目次)

## 4.ベースの開発/共有機能の使い方について
### 4-1. ロビーについて
・ロビーのデザイン</br>
・タイトル</br>
・ゲームの分類/参加方法</br>
・建築したい時</br>

### 4-2. アシストデータパックについて
・概要(担当)</br>
・使い方</br>

### 4-3. 便利なライブラリデータパック
・概要</br>
・使い方</br>

</br>[目次に戻る](#目次)

### 5.製作者/ミニゲーム一覧
#### ○らすく
製作者番号 1 </br>
▼製作ゲーム</br>
    No.101 スペースインベーダー</br>
    No.102 パックマン</br>
#### ○ちぇん
製作者番号 2 </br>
▼製作ゲーム</br>
    No.201 リバーシ
#### ○nutbox
製作者番号 3 </br>
▼製作ゲーム</br>
    No.301 採掘ゲーム
#### ○水龍
製作者番号 4 </br>
▼製作ゲーム</br>
    No.401 タラタラしてんじゃねーよ
#### ○CobwebbyPiano
製作者番号 5 </br>
▼製作ゲーム</br>
    No.502 クレー射撃
#### ○でるた
製作者番号 6 </br>
▼製作ゲーム</br>
    No.601 アニマル塔戦闘
#### ○卯月
製作者番号 7 </br>
▼製作ゲーム</br>
#### ○クマ
製作者番号 8 </br>
▼製作ゲーム</br>
#### ○air
製作者番号 -- </br>
▼製作ゲーム</br>
#### ○ハル
製作者番号 -- </br>
▼製作ゲーム</br>
#### ○kaialex
製作者番号 -- </br>
▼製作ゲーム</br>
#### ○Rtz
製作者番号 -- </br>
▼製作ゲーム</br>

</br>[目次に戻る](#目次)

</br>
</br>
【便利ツール等の使い方】</br>
・VSCodeの使用方法</br>
・GitHubの使用方法</br>
・スプレッドシートの使用方法</br>
・Discordのミニゲ合同鯖の使用方法</br>
・ゲームのテンプレート(予定)</br>
・ライブラリ使用方法(OhMyDat,Hologram)</br>
